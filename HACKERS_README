cat << eof

Hey hackers,

cdist has not been published, you're accessing a early in developent
code.

Do not believe anything written in cdist, besides what's written in this file
(everything else may be future stuff for the initial release).

   -- Nico, 20101201


What you can do so far: (executed from top level directory)

The following code will get executed if you run this README,
I usually do it like this:

   % rm -rf /tmp/localhost && ./HACKERS_README

eof

# Tell the user what we do, so this script makes sense during execution
set -x

# Abort on any error
set -e

# prepare use (only from top level directory)
export PATH="$PATH:$(pwd -P)/bin"
export __cdist_config="$(pwd -P)/conf"

__cdist_out_objects=/tmp/localhost/objects
__cdist_out_explorers=/tmp/localhost/explorers
__cdist_out_execs=/tmp/localhost/exec


# Run explorer on a "remote" host
cdist-explorer-run localhost "$__cdist_out_explorers"

# Display result
find "$__cdist_out_explorers"

# Test first level manifest execution
cdist-manifest-init localhost "$__cdist_out_objects"

# See what it generated
find "$__cdist_out_objects"

# Generate all objects, including from types that generate objects as well
cdist-manifest-run-all localhost "$__cdist_out_objects"

# See what it generated
find "$__cdist_out_objects"

# Generate code for all objects in object dir
cdist-object-codegen-all localhost "$__cdist_out_objects" "$__cdist_out_execs"

# Display result, including permissions
ls -lR "$__cdist_out_execs"

# Transfer generated code
cdist-exec-transfer localhost "$__cdist_out_execs"

# Execute generated code
cdist-exec-run localhost
